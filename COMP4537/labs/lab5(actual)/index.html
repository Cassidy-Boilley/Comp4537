<!-- Server1 - index.html -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client</title>
</head>

<body>
    <h1>Client</h1>

    <!-- Insert Data Form -->
    <form id="insertForm">
        <button type="button" onclick="insertData()">Insert Data</button>
    </form>

    <div id="insertResponse"></div>

    <hr>

    <!-- SQL Query Form -->
    <form id="queryForm">
        <textarea id="sqlQuery" placeholder="Enter SQL query"></textarea><br>
        <input type="submit" value="Submit">
    </form>

    <div id="queryResponse"></div>

    <script>
        function insertData() {
            fetch('http://localhost:3000', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'queryType=INSERT&name=Sara Brown&dob=1901-01-01',
            })
                .then(response => response.text())
                .then(data => {
                    document.getElementById('insertResponse').textContent = data;
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        document.getElementById('queryForm').addEventListener('submit', function (event) {
                event.preventDefault();
                const sqlQuery = document.getElementById('sqlQuery').value.trim();
                const queryType = sqlQuery.toUpperCase().startsWith('SELECT') ? 'SELECT' : 'INSERT';

                const requestOptions = {
                    method: queryType === 'SELECT' ? 'GET' : 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                };

                if (queryType === 'SELECT') {
                    // Remove body for GET requests
                    fetch('http://localhost:3000?queryType=SELECT', requestOptions)
                        .then(response => response.json())
                        .then(data => {
                            document.getElementById('queryResponse').textContent = JSON.stringify(data);
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                } else {
                    // Add body for POST requests
                    requestOptions.body = `queryType=${queryType}&sqlQuery=${sqlQuery}`;

                    fetch('http://localhost:3000', requestOptions)
                        .then(response => response.text())
                        .then(data => {
                            document.getElementById('queryResponse').textContent = data;
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                }
            });

    </script>
</body>

</html>